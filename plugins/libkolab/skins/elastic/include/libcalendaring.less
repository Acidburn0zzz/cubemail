/**
 * Kolab core library
 *
 * This file contains Elastic skin styles for libcalendaring plugin.
 *
 * @author Aleksander Machniak <machniak@kolabsys.com>
 *
 * Copyright (C) 2012-2018, Kolab Systems AG <contact@kolabsys.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */

.invitebox {
    & > i.icon {
        position: absolute;
        top: 0;
        padding-top: .5em;
    }

    & > span {
        padding-left: 2.5em;
    }

    td {
        padding: 2px;

        &.ititle {
            font-weight: bold;
            padding-right: 0.5em;
        }

        &.label {
            color: #666;
            padding-right: 1em;
        }

        &.sensitivity {
            font-weight: bold;
        }

        &.recurrence-id {
            text-transform: uppercase;
            font-style: italic;
        }

        &.date.modified {
            font-weight: bold;
            color: @color-error;
        }

        em {
            font-weight: bold;
        }
    }

    .itip-buttons {
        display: flex;
        flex-wrap: wrap;

        input.button {
            margin: 0 .25rem .25rem 0;
        }
    }

    .rsvp-buttons {
        width: 100%;
    }

    .itip-reply-controls {
        margin-top: .25rem;

        a {
            margin-left: 1em;
        }
    }

    .rsvp-status {
        margin: .5rem 0;
        width: 100%;

        &.hint {
            color: #666;
            font-style: italic;
        }

        &:before {
            line-height: 1.1;
            color: lighten(@color-black, 25%);
        }

        &.loading:before {
            &:extend(.font-icon-class);
            .animated-icon-class;
            content: @fa-var-circle-notch;
            line-height: 1;
        }

        &.declined:before {
            &:extend(.font-icon-class);
            content: @fa-var-ban;
            color: @color-error;
        }

        &.tentative:before {
            &:extend(.font-icon-class);
            content: @fa-var-check-circle;
            color: @color-warning;
        }

        &.accepted:before {
            &:extend(.font-icon-class);
            content: @fa-var-check-circle;
            color: @color-success;
        }

        &.delegated:before {
            &:extend(.font-icon-class);
            content: @fa-var-share;
        }

        &.needs-action:before {
            &:extend(.font-icon-class);
            content: @fa-var-question-circle;
        }
    }

    .folder-select {
        white-space: nowrap;

        select {
            display: initial;
            width: auto;
        }
    }
}

.attendee {
    &:after {
        &:extend(.font-icon-class);
        content: @fa-var-question-circle;
        display: inline;
        float: none;
        font-size: 1em;
        margin-left: .2rem;
    }

    &.req-participant:after {
        content: @fa-var-user;
    }

    &.opt-participant:after {
        .font-icon-regular(@fa-var-user);
    }

    &.non-participant:after {
        content: @fa-var-user;
        color: #999;
    }

    &.chair:after {
        content: @fa-var-user; // todo
        color: @color-warning;
    }

    &.accepted:after {
        content: @fa-var-check-circle;
        color: @color-success;
    }

    &.declined:after {
        content: @fa-var-ban;
        color: @color-error;
    }

    &.tentative:after {
        content: @fa-var-check-circle;
        color: @color-warning;
    }

    &.delegated:after {
        content: @fa-var-share;
    }

    &.organizer:after {
        content: @fa-var-briefcase; // TODO: better icon
    }

    &.completed:after,
    &.in-process:after {
        // TODO ?
    }
}


.attendees-comentbox {
    label {
        display: inline;
    }
}

#edit-attendees-legend {
    margin-top: 1rem;
}

.edit-attendees-table {
    th, td {
        width: 1%;
        text-align: center;
    }

    td {
        border: 0;
        padding-bottom: 0;
    }

    th {
        border-bottom: 1px solid #eee !important;
    }

    th.name, td.name, th.role, td.role {
        width: auto;
        text-align: left;
    }

    th.invite {
        label:before {
            &:extend(.font-icon-class);
            content: @fa-var-envelope;
            display: inline;
            float: none;
            margin-left: .25rem;
        }

    }

    td.name {
        span {
            line-height: 2.5;
        }
    }

    td.availability,
    td.confirmstate {
        span {
            margin: 0;
        }

        span:after,
        span:before {
            line-height: 2;
            margin: 0;
            font-size: 1.2em;
            height: 2em;
            width: 2em;
        }
    }

    td.options {
        a {
            display: inline-block;
            height: 2em;

            &:before {
                line-height: 2;
                height: 2em;
            }
        }
    }

    .inner {
        display: none;
    }

    // TODO: a.expandlink
}

.form-searchbar {
    display: flex;
    margin-bottom: .5rem;

    input[type=button] {
        margin-left: .5em;
    }
}

.attachmentslist li.link {
    &.message.eml:before {
        content: @fa-var-envelope;
    }

    a.messagelink {
        .overflow-ellipsis;
        margin-right: .25rem;
    }

    a.delete .inner {
        display: none;
    }
}

.messagelist tbody .attachment span.ical {
    // TODO
}

.alarms-input {
    .edit-alarm-item {
        display: flex;

        & + .edit-alarm-item {
            margin-top: .25rem;
        }
    }

    .edit-alarm-buttons {
        width: 5em;

        a {
            line-height: 1.2;
            display: block;
            padding: .375em .25em;
            float: left;
            margin: 0 .25rem;

            &:before {
                margin: 0;
                width: 1em;
            }
        }

        .inner {
            display: none;
        }
    }

    .edit-alarm-item.first .delete-alarm {
        display: none;
    }

    .edit-alarm-type {
        flex: 1;
    }

    .edit-alarm-set {
        display: flex;
        flex: 1;
    }

    .edit-alarm-values {
        margin-left: .25rem;
        flex: 5;
    }

    .edit-alarm-offset {
        flex: 5;
    }

    .edit-alarm-date,
    .edit-alarm-time,
    .edit-alarm-related {
        flex: 3;
    }
}

.recurrence-form {
    .recurrence-rdates {
        width: 100%;
        padding: 0;
        list-style-type: none;

        &:empty {
            margin: 0;
        }

        a.delete {
            margin-left: 2em;
            &:before {
                display: inline-block;
                float: none;
            }
        }

        .inner {
            display: none;
        }
    }

    .recurrence-onevery {
        select {
            width: 35%;
            display: inline;
        }
    }

    .inputform {
        display: flex;

        input.button {
            margin-left: .25rem;
        }
    }

    div.line {
        width: 100%;
        display: flex;
        margin-bottom: .25rem;

        label {
            margin-left: .5em;
            min-width: 4em;
            line-height: 2.5;
        }
    }

    .month,
    .monthday,
    .weekday {
        display: inline-block;
        width: 3.5em;
        margin-right: .5rem;

        input {
            margin-right: .25rem;
        }
    }

    .monthday {
        width: 2.75em;
    }

    .table td {
        border: 0;
        padding: 0;

        &:first-child label {
            line-height: 2.5;
        }

        & label.monthday:first-child {
            margin-top: .5rem;
        }
    }

    .input-group-append,
    .input-group-prepend {
        display: initial; // fixes buggy height of the element
    }
}
